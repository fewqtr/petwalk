<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>
<!-- xml 을 java 에서 쓰기 위해 연결되는 interface 가 필요 하다. -->

<!-- 쿼리문을 작성해둔 interface 주소 -->
<mapper namespace="com.pet.walkroute.dao.RouteShareDAO">
   <select id="isAdmin" resultType="String">
   		select role from member where userID = #{param1}  
   </select>
   
   <insert id="write" parameterType="hashmap">
   		INSERT INTO routeBoard(userID,walkNum,siID,guID,dongID,walkRouteName,walkRouteDetail,walkRoutebHit
   							,walkRouteType,walkRouteBlind)
   		VALUES(#{userID},#{walkNum},#{siID},#{guID},#{dongID},#{walkRouteName},#{walkRouteDetail}
   				,0,#{walkRouteType},false);  
   </insert>
   
   <select id="siID" resultType="String">
   		select siID from siDetail where siName = #{param1}  
   </select>
   
   <select id="guID" resultType="String">
   		select guID from guDetail where guName = #{param1}  
   </select>
   
   <select id="dongID" resultType="String">
   		select dongID from dongDetail where dongName = #{param1}  
   </select>
   
   <select id="list" resultType="com.pet.walkroute.dto.RouteShareDTO">
		SELECT walkRouteNum, userID, walkNum, siID, guID, dongID,
				walkRouteName, walkRouteDetail, walkRoutebHit, 
				walkRouteWriteDate,walkRouteType, walkRouteBlind, recommendation
		FROM routeboard ORDER BY walkRouteNum DESC 
		LIMIT #{param1} OFFSET #{param2}
	</select>
	
	<select id="totalCount" resultType="int">
		SELECT COUNT(walkRouteNum) FROM routeboard
	</select>
	
	<select id="detail" resultType="com.pet.walkroute.dto.RouteShareDTO">
		SELECT * FROM routeboard where walkRouteNum = #{walkRouteNum}
	</select>
	
	<insert id="bookmark">
		INSERT INTO bookmark(userID,walkNum,bmBlindWhether)VALUES(#{param2}, #{param1},false)
	</insert>
</mapper>