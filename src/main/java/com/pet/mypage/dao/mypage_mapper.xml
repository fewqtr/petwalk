<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>
<!-- xml 을 java 에서 쓰기 위해 연결되는 interface 가 필요 하다. -->

<!-- 쿼리문을 작성해둔 interface 주소 -->
<mapper namespace="com.pet.mypage.dao.MyPageDAO">
   
   <insert id="profileWrite">
   	INSERT INTO profile(userID, petAge, petName, petGender, petNeutered, petIntroduce, petSize)
   	VALUES(#{param1}, #{param4}, #{param3}, #{param5}, #{param6}, #{param7}, #{param2})
   </insert>
      
   <select id="findprofile" resultType="com.pet.mypage.dto.MyPageDTO">
   	SELECT * FROM profile WHERE userID = #{param1}
   </select>
   
   <select id="findprofileAndphoto" resultType="com.pet.mypage.dto.MyPageDTO">
	  SELECT p.*, ph.serPhotoname FROM profile p
	  LEFT JOIN photo ph ON p.profileID = ph.photoidenNum 
	  WHERE p.userID = #{param1} AND ph.categoryCode = #{param2} AND ph.photoidenNum = #{param3} AND ph.photoBlindWhether = 0
	</select>
	
	<update id="petprofileUpdate">
		UPDATE profile SET petAge = #{param4}, petName = #{param3}, petGender = #{param5}, petNeutered = #{param6}, petIntroduce = #{param7}, petSize = #{param2}
		WHERE userID=#{param1}
	</update>
	
	<select id="findrouteDrawList" resultType="com.pet.mypage.dto.MyPageDTO">
		SELECT * FROM routelist WHERE userID = #{param1} ORDER BY walkDate DESC
	</select>
	
	<select id="myinquiryList" resultType="com.pet.mypage.dto.MyPageDTO">		
		SELECT * FROM board WHERE userID = #{param1} 
		AND categoryCode IN ('B_06', 'B_07', 'B_08', 'B_09', 'B_10', 'B_11') 
		ORDER BY boardWriteDate DESC		
	</select>
	
	<select id="findrouteShareList" resultType="com.pet.mypage.dto.MyPageDTO">
		SELECT * FROM routeboard WHERE userID = #{param1} ORDER BY walkRouteWriteDate DESC
	</select>

   
</mapper>